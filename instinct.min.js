(function(){function n(n){return"function"!=typeof n}function t(n){var t=c.exec(""+n.prototype.constructor),e={};return t[1].length>0&&t[1].split(",").forEach(function(n,t){e[n]=t}),e}function e(){}var c=/function.*?\((.*?)\).*/;instinct=function(c,o){function r(n,t){var e=[];for(key in n)e[n[key]]="cb"==key?t:o[key];return e}c=c||{},o=o||{};var u={},i={logic:c,facts:o,process:u};return i.exec=function(e,f){function a(){l--||e.apply(this,r(s,f))}if(n(e)&&(e=c[e],n(e)))return f&&f(e);var s=t(e),l=0;return Object.keys(s).forEach(function(n){if(void 0===o[n]&&"cb"!=n){l+=1;var t=u[n];t?u[n]=function(n){t(n),a()}:(u[n]=function(t,e){o[n]=2==arguments.length?e:t,delete u[n],a()},i.exec(n,u[n]))}}),a(),i},i.as=function(n){return u[n]=e,function(t,e){o[n]=2==arguments.length?e:t,console.log(o[n]),u[n](),delete u[n]}},i}})();