(function(){function n(n){var e=r.exec(""+n.prototype.constructor),t={};return e[1].length>0&&e[1].replace(/\s/g,"").split(",").forEach(function(n,e){t[n]=e}),t}function e(e,r){function o(n,e){var t=[];for(var o in n)t[n[o]]="cb"==o?e:r[o];return t}e=e||{},r=r||{};var u={},c={logic:e,facts:r,process:u};return c.exec=function(t,f){function i(n){arguments.length>1&&n&&(p=-1,u[t].apply(c,arguments)),p--||l.apply(c,o(s,function(){u[t].apply(c,arguments)}))}var l,a;if("function"!=typeof t){if(r[t])return f(null,r[t]);if(a=u[t])return u[t]=function(){a.apply(c,arguments),f&&f.apply(c,arguments)};if(l=e[t],"function"!=typeof l)return f(null,r[t]=l)}else l=t;var s=n(l),p=0;return u[t]=function(n,e){delete u[t],n||(r[t]=e),n&&!n.ref&&(n={ref:t,err:n}),f&&f.call(c,n,e)},Object.keys(s).forEach(function(n){void 0===r[n]&&"cb"!=n&&(p++,c.exec(n,i))}),i(),c},c.as=function(n){return u[n]=t,function(e,t){r[n]=2==arguments.length?t:e,console.log(r[n]),u[n](),delete u[n]}},c}function t(){}"undefined"==typeof module?self.instinct=e:module.exports=e,e.version="0.0.3";var r=/function.*?\((.*?)\).*/})();