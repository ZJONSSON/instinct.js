(function(){function n(){}var t=/function \((.*?)\).*/;matchArgs=function(n){var c=t.exec(""+n.prototype.constructor),e={};return c[1].length>0&&c[1].split(",").forEach(function(n,t){e[n]=t}),e},instinct=function(t,c){function e(n,t){var e=[];for(key in n)e[n[key]]="cb"==key?t:c[key];return e}t=t||{},c=c||{};var r={},o={logic:t,facts:c,process:r};return o.exec=function(n,u){function i(){a--||n.apply(this,e(f,u))}var f=matchArgs(n),a=0;return Object.keys(f).forEach(function(n){if(!c[n]&&"cb"!=n){a+=1;var e=r[n];e?r[n]=function(n){e(n),i()}:(r[n]=function(t,e){c[n]=2==arguments.length?e:t,delete r[n],i()},o.exec(t[n],r[n]))}}),i(),o},o.as=function(t){return r[t]=n,function(n,e){c[t]=2==arguments.length?e:n,console.log(c[t]),r[t](),delete r[t]}},o}})();