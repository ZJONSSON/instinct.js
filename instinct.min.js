(function(){var n=/function \((.*?)\).*/;matchArgs=function(t){var c=n.exec(""+t.prototype.constructor),r={};return c[1].length>0&&c[1].split(",").forEach(function(n,t){r[n]=t}),r},instinct=function(n,t){function c(n,c){var r=[];for(key in n)r[n[key]]="cb"==key?c:t[key];return r}n=n||{},t=t||{};var r={},e={logic:n,facts:t,process:r};return e.exec=function(o,i){function f(){a--||o.apply(this,c(u,i))}var u=matchArgs(o),a=0;return Object.keys(u).forEach(function(c){if(!t[c]&&"cb"!=c){a+=1;var o=r[c];o?r[c]=function(n){o(n),f()}:(r[c]=function(n){t[c]=n,delete r[c],f()},e.exec(n[c],function(n){r[c](n)}))}}),f(),e},e}})();