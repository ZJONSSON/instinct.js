(function(){function n(n){var t=c.exec(""+n.prototype.constructor),e={};return t[1].length>0&&t[1].replace(/\s/g,"").split(",").forEach(function(n,t){e[n]=t}),e}function t(t,c){function r(n){var t=this,e=[];for(var r in n)e[n[r]]=t[r]?t[r]:c[r];return e}t=t||{},c=c||{};var a={},l={logic:t,facts:c,process:a};return l.exec=function(o,u){function f(n){if(arguments.length>1&&n&&(g=-1,a[o].apply(l,arguments)),!g--){var t={facts:l.facts,callback:function(){this.callback=e,a[o].apply(l,arguments)},fact:function(n){this.callback(null,n)},error:function(n){this.callback(n,null)}},c=r.call(t,p);i.apply(t,c)}}var i,s;if("function"!=typeof o){if(c[o])return u(null,c[o]);if(s=a[o])return a[o]=function(){s.apply(l,arguments),u&&u.apply(l,arguments)};if(i=t[o],"function"!=typeof i)return u(null,c[o]=i)}else i=o;var p=n(i),g=0;return a[o]=function(n,t){delete a[o],n||(c[o]=t),n&&!n.ref&&(n={ref:o,err:n}),u&&u.call(l,n,t)},Object.keys(p).forEach(function(n){void 0!==c[n]||n in["facts","callback","fact","error"]||(g++,l.exec(n,f))}),f(),l},l.as=function(n){return a[n]=e,function(t,e){c[n]=2==arguments.length?e:t,console.log(c[n]),a[n](),delete a[n]}},l}function e(){}"undefined"==typeof module?self.instinct=t:module.exports=t,t.version="0.0.3";var c=/function.*?\((.*?)\).*/})();