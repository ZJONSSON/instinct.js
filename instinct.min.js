(function(){function n(n){var t=c.exec(""+n.prototype.constructor),e={};return t[1].length>0&&t[1].replace(/\s/g,"").split(",").forEach(function(n,t){e[n]=t}),e}function t(t,c){function r(n,t){var e=[];for(var r in n)e[n[r]]="callback"==r?t:c[r];return e}t=t||{},c=c||{};var l={},u={logic:t,facts:c,process:l};return u.exec=function(a,o){function f(n){arguments.length>1&&n&&(g=-1,l[a].apply(u,arguments));var t={facts:u.facts,callback:function(){this.callback=e,l[a].apply(u,arguments)},fact:function(n){this.callback(null,n)},error:function(n){this.callback(n,null)}};g--||i.apply(t,r(p,t.callback))}var i,s;if("function"!=typeof a){if(c[a])return o(null,c[a]);if(s=l[a])return l[a]=function(){s.apply(u,arguments),o&&o.apply(u,arguments)};if(i=t[a],"function"!=typeof i)return o(null,c[a]=i)}else i=a;var p=n(i),g=0;return l[a]=function(n,t){delete l[a],n||(c[a]=t),n&&!n.ref&&(n={ref:a,err:n}),o&&o.call(u,n,t)},Object.keys(p).forEach(function(n){void 0===c[n]&&"cb"!=n&&(g++,u.exec(n,f))}),f(),u},u.as=function(n){return l[n]=e,function(t,e){c[n]=2==arguments.length?e:t,console.log(c[n]),l[n](),delete l[n]}},u}function e(){}"undefined"==typeof module?self.instinct=t:module.exports=t,t.version="0.0.3";var c=/function.*?\((.*?)\).*/})();