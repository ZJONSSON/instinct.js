(function(){function n(n){var e=r.exec(""+n.prototype.constructor),t={};return e[1].length>0&&e[1].replace(/\s/g,"").split(",").forEach(function(n,e){t[n]=e}),t}function e(e,r){function u(n,e){var t=[];for(var u in n)t[n[u]]="cb"==u?e:r[u];return t}e=e||{},r=r||{};var o={},c={logic:e,facts:r,process:o};return c.exec=function(t,f){function i(n){arguments.length>1&&n&&(p=-1,o[t].apply(c,arguments)),p--||a.apply(c,u(s,function(){o[t].apply(c,arguments)}))}var a,l;if("function"!=typeof t){if(r[t])return f(r[t]);if(l=o[t])return o[t]=function(){l.apply(c,arguments),f&&f.apply(c,arguments)};if(a=e[t],"function"!=typeof a)return f(a)}else a=t;var s=n(a),p=0;return o[t]=function(n,e){delete o[t],1!=arguments.length&&n?n&&n.ref||(arguments=[{ref:t,err:n},null]):r[t]=2==arguments.length?e:n,f&&f.apply(c,arguments)},Object.keys(s).forEach(function(n){void 0===r[n]&&"cb"!=n&&(p++,c.exec(n,i))}),i(),c},c.as=function(n){return o[n]=t,function(e,t){r[n]=2==arguments.length?t:e,console.log(r[n]),o[n](),delete o[n]}},c}function t(){}"undefined"==typeof module?self.instinct=e:module.exports=e,e.version="0.0.3";var r=/function.*?\((.*?)\).*/})();